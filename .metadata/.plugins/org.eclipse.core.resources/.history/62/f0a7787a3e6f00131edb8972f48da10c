package com.example.tictac;

import java.util.TimerTask;

import android.content.Context;
import android.widget.Toast;

public class UpdateTimer extends TimerTask {
  public BoardView boardView;
  Context theAct = null;
  UpdateTimer(Context theAct)
  {
	  this.theAct = theAct;
  }
  
  @Override
  public void run() {
    GameService.getInstance().startGame( 0 );
    
    MainActivity mact;
    mact = (MainActivity)theAct;
    String sres = null;
    if(mact.theInstance.winner == CheckWinner.WINNER_TIE)
    {
    	sres = "Tie game";
    }
    
    if(mact.theInstance.winner == CheckWinner.WINNER_X)
    {
    	sres = "X won game";
    }
    
    if(mact.theInstance.winner == CheckWinner.WINNER_0)
    {
    	sres = "O won game";
    }
    
    // push a toast message up saying we have a winner
    if(sres!=null)
    {
    	Toast.makeText(theAct.getApplicationContext(), sres, Toast.LENGTH_LONG).show();
    }
    boardView.post(new Runnable(){ public void run(){ boardView.invalidate(); } });
  }
}
